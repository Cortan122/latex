\usepackage{iftex}
\ifXeTeX
  \newcommand{\f}{\frac}

  \usepackage{fontspec}
  \usepackage{polyglossia}
  \setdefaultlanguage{russian}
  \setotherlanguage{english}
  \setmainfont[Ligatures=TeX]{CMU Serif}
  \setmonofont{Consolas}
  % \newfontfamily\cyrillicfont[Ligatures=TeX]{CMU Serif}

  % todo: only do this on the first paragraph
  \setlength{\parindent}{0pt}
  % \PolyglossiaSetup{russian}{indentfirst=false}
\else
  \usepackage{cmap}
  \usepackage[english,russian]{babel}

  \renewcommand{\f}{\frac}
\fi

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{gensymb}

\usepackage[margin=0.5in]{geometry}

\author{\AA{AAAAA AAAAAAA}{4} \\ \AA{AAAAAA}{11}}

\newcommand{\ds}{\displaystyle}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\renewcommand{\l}{\left}
\renewcommand{\r}{\right}
\renewcommand{\emptyset}{\varnothing}

\usepackage{enumitem}
\makeatletter
\newcommand{\realasbuk}[1]{\expandafter\russian@realalph\csname c@#1\endcsname}

\def\russian@realAlph#1{\ifcase#1\or
   А\or Б\or В\or Г\or Д\or Е\or Ж\or
   З\or И\or К\or Л\or М\or Н\or О\or
   П\or Р\or С\or Т\or У\or Ф\or Х\or
   Ц\or Ч\or Ш\or Щ\or Э\or Ю\or Я\else\xpg@ill@value{#1}{russian@Alph}\fi}
\def\russian@realalph#1{\ifcase#1\or
   а\or б\or в\or г\or д\or е\or ж\or
   з\or и\or к\or л\or м\or н\or о\or
   п\or р\or с\or т\or у\or ф\or х\or
   ц\or ч\or ш\or щ\or э\or ю\or я\else\xpg@ill@value{#1}{russian@alph}\fi}

\AddEnumerateCounter{\realasbuk}{\russian@realalph}{щ}
\makeatother
